# ADR-001: Banco de Dados

## Status
Aprovado

## Contexto
O módulo de clientes é o núncleo do CRM e precisa de transações ACID para
garantir consistência entre a tabela de de clientes (`customers`) e a tabela
de eventos (`customer_events`) em uma única transação. Também precisamos de
suporte a dados semiestruturados para o payload dos eventos sem abrir mão de
consultas relacionais.

## Opções Consideradas

| Opção          | Prós                                                              | Contras                                                        |
|----------------|-------------------------------------------------------------------|----------------------------------------------------------------|
| PostgreSQL      | ACID nativo, JSONB nativo, open source, custo zero               | Requer modelagem cuidadosa do Event Store                      |
| SQL Server      | Familiar, ACID nativo e muito usado                              | Licença paga, sem JSONB nativo                                 |
| MongoDB         | Schema flexível, bom para documentos                             | Transações multi-documento menos maduras, mais complexo para Event Sourcing relacional |
| EventStoreDB    | Feito especificamente para Event Sourcing                        | Pouco comum no mercado BR, complexidade operacional extra      |


## Decisão
PostgreSQL.

## Consequências
- Uma única transação atômica grava `customers` e `customer_events` com segurança
- Campo `payload` usa `JSONB` — pesquisável, eficiente e sem schema rígido
- Custo zero de licença com excelente suporte via EF Core
- A projeção do estado atual precisa ser mantida manualmente como read model
